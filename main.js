(()=>{"use strict";var n={56:(n,e,t)=>{n.exports=function(n){var e=t.nc;e&&n.setAttribute("nonce",e)}},72:n=>{var e=[];function t(n){for(var t=-1,o=0;o<e.length;o++)if(e[o].identifier===n){t=o;break}return t}function o(n,o){for(var r={},a=[],A=0;A<n.length;A++){var s=n[A],l=o.base?s[0]+o.base:s[0],c=r[l]||0,d="".concat(l," ").concat(c);r[l]=c+1;var g=t(d),p={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==g)e[g].references++,e[g].updater(p);else{var m=i(p,o);o.byIndex=A,e.splice(A,0,{identifier:d,updater:m,references:1})}a.push(d)}return a}function i(n,e){var t=e.domAPI(e);return t.update(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;t.update(n=e)}else t.remove()}}n.exports=function(n,i){var r=o(n=n||[],i=i||{});return function(n){n=n||[];for(var a=0;a<r.length;a++){var A=t(r[a]);e[A].references--}for(var s=o(n,i),l=0;l<r.length;l++){var c=t(r[l]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}r=s}}},113:n=>{n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},314:n=>{n.exports=function(n){var e=[];return e.toString=function(){return this.map(function(e){var t="",o=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),o&&(t+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),t+=n(e),o&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t}).join("")},e.i=function(n,t,o,i,r){"string"==typeof n&&(n=[[null,n,void 0]]);var a={};if(o)for(var A=0;A<this.length;A++){var s=this[A][0];null!=s&&(a[s]=!0)}for(var l=0;l<n.length;l++){var c=[].concat(n[l]);o&&a[c[0]]||(void 0!==r&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=r),t&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=t):c[2]=t),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),e.push(c))}},e}},354:n=>{n.exports=function(n){var e=n[1],t=n[3];if(!t)return e;if("function"==typeof btoa){var o=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),r="/*# ".concat(i," */");return[e].concat([r]).join("\n")}return[e].join("\n")}},365:(n,e,t)=>{t.d(e,{A:()=>A});var o=t(354),i=t.n(o),r=t(314),a=t.n(r)()(i());a.push([n.id,'*:not(dialog) {\n  padding: 0;\n  margin: 0;\n  box-sizing: border-box;\n}\nmain {\n  display: flex;\n  flex-direction: column;\n}\n\n#scene img {\n  max-width: 100%;\n  cursor: pointer;\n}\n\n.anchor {\n  anchor-name: --scene;\n}\n\n#scene #image-enclosure {\n  user-select: none;\n  grid-column: 1 / -1;\n  border: 2px ridge black;\n  padding: 2px;\n  margin: 1rem;\n}\n\nul#characters {\n  margin-left: 1rem;\n  grid-column: 2;\n  display: grid;\n  grid-template-rows: min(20dvh, 150px);\n  grid-template-columns: 30% 30% 30%;\n  width: max-content;\n  list-style-type: none;\n  justify-content: stretch;\n  align-items: stretch;\n  text-align: center;\n\n  > li {\n    display: flex;\n    padding: 0.5ch;\n    max-width: 100%;\n    overflow: clip;\n    aspect-ratio: 1;\n    justify-content: center;\n\n    > label {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      > img {\n        max-width: 140px;\n        max-height: 30dvh;\n        min-width: 140px;\n      }\n    }\n  }\n  > li:hover > label {\n    background-color: rgb(249 239 134);\n    padding: 0.6ch 0.5ch 0.5ch 0.5ch;\n  }\n}\n#targetting-window {\n  visibility: hidden;\n  z-index: 3;\n  position: absolute;\n  position-anchor: --scene;\n\n  anchor-name: --msg-anchor;\n\n  /*\n  width: 33px;\n  height: 33px;\n  border: 5px solid blue;\n  */\n  min-width: 16px;\n  aspect-ratio: 1;\n  border: 0.3rem solid blue;\n  border-image: linear-gradient(0deg, rgb(0, 71, 0), lightgreen);\n  border-image-slice: 1;\n}\n\n#targetting-window.shimmer {\n  animation: 2s cubic-bezier(0.1, -0.6, 0.2, 0) infinite alternate shimmer;\n}\n\n.tag.notfound {\n  display: none;\n}\n\n.tag {\n  background-color: transparent;\n  color: transparent;\n  z-index: 3;\n  position: absolute;\n  position-anchor: --scene;\n  border-radius: 25px;\n  padding: 0.5rem;\n  display: flex;\n  max-width: 32px;\n  height: auto;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n  user-select: none;\n}\n\n.tag:hover {\n  transition: all 0.5s;\n  background-color: #ffffffc2;\n  color: black;\n  width: max-content;\n  max-width: max-content;\n}\n\n@keyframes shimmer {\n  0% {\n    border-image: linear-gradient(0deg, rgb(0, 71, 0), lightgreen);\n    border-image-slice: 1;\n  }\n\n  25% {\n    border-image: linear-gradient(90deg, rgb(0, 71, 0), lightgreen);\n    border-image-slice: 1;\n  }\n  50% {\n    border-image: linear-gradient(180deg, rgb(0, 71, 0), lightgreen);\n    border-image-slice: 1;\n  }\n\n  75% {\n    border-image: linear-gradient(270deg, rgb(0, 71, 0), lightgreen);\n    border-image-slice: 1;\n  }\n}\n\n::backdrop {\n  margin: initial;\n  padding: initial;\n  background-image: linear-gradient(\n    45deg,\n    magenta,\n    rebeccapurple,\n    dodgerblue,\n    green\n  );\n  opacity: 0.75;\n}\n\n.game:not([hidden]) {\n  display: grid;\n\n  grid-template-columns: 100px 1fr;\n  grid-template-rows: repeat(4, auto);\n\n  max-width: min(100vw, 1000px);\n  row-gap: 1rem;\n  column-gap: 1rem;\n\n  justify-content: stretch;\n  align-items: stretch;\n\n  > section:nth-of-type(-n + 3) {\n    display: grid;\n    grid-template-columns: subgrid;\n    grid-template-rows: auto;\n    margin-left: 1rem;\n  }\n\n  > section {\n    grid-column: 1 / -1;\n  }\n\n  > section:has(> button:disabled) {\n    display: none;\n  }\n\n  > #scene {\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    justify-content: center;\n    margin-left: 0.8rem;\n\n    > label {\n      display: flex;\n      flex-direction: row;\n      justify-content: center;\n      align-items: center;\n\n      > button {\n        user-select: none;\n        width: 50px;\n        display: grid;\n        grid-template-rows: 15px;\n        border-radius: 30px;\n        background: radial-gradient(#918174 0%, black 100%);\n        background-position: 50px 0px;\n        border: 3px inset black;\n      }\n\n      > button:hover {\n        background-position: 0px 50px;\n      }\n      > button::after {\n        content: "";\n        background-color: #fff493;\n        border-radius: 50%;\n        width: 49%;\n        margin: 1px;\n        aspect-ratio: 1;\n        user-select: none;\n      }\n\n      > button.offPos::after {\n        content: "";\n        background-color: #fff493;\n        border-radius: 50%;\n        width: 49%;\n        margin: 1px;\n        aspect-ratio: 1;\n        animation: 0.05s linear 1 forwards toggle-motion-right;\n      }\n\n      > button.onPos::after {\n        content: "";\n        background-color: fff493;\n        border-radius: 50%;\n        width: 49%;\n        margin: 1px;\n        aspect-ratio: 1;\n        animation: 0.05s linear 1 forwards toggle-motion-left;\n      }\n    }\n  }\n\n  > section:first-child > p:first-child {\n    height: 100%;\n    width: 100%;\n    text-wrap-style: balance;\n    text-wrap-mode: wrap;\n    text-align: center;\n    padding: 1rem;\n    display: flex;\n    background-color: yellow;\n    font-family: fantasy;\n    letter-spacing: 0.1ch;\n    background: linear-gradient(\n      90deg,\n      #ffeb3b,\n      transparent 95%,\n      transparent 100%\n    );\n  }\n  button {\n    align-self: center;\n    justify-self: center;\n    margin: 5px;\n    height: 100%;\n    width: 100%;\n    min-width: max-content;\n    background-color: yellow;\n    font-weight: 600;\n    border-radius: 5px;\n    user-select: none;\n  }\n}\n\n@keyframes toggle-motion-right {\n  0% {\n    transform: translateX(99%);\n  }\n  100% {\n    transform: translateX(0%);\n  }\n}\n@keyframes toggle-motion-left {\n  0% {\n    transform: translateX(0);\n  }\n  100% {\n    transform: translateX(99%);\n  }\n}\nmain > header {\n  padding: 1rem;\n}\n\n.blur {\n  filter: blur(33px);\n}\n\n#top-ten {\n  border: 5px double black;\n  padding: 1rem;\n  width: 280px;\n}\n\n#top-ten-dialog {\n  border-radius: 20px;\n  width: 280px;\n\n  & h1 {\n    font-size: 1.2rem;\n  }\n}\n#top-ten-dialog > p {\n  padding: 1rem;\n  font-family: fantasy;\n  letter-spacing: 0.1ch;\n  color: #86572e;\n  text-align: center;\n  font-size: x-large;\n  margin-top: 0.5rem;\n  border: 5px double black;\n  padding: .5rem;\n  user-select: none;\n\n  background-color: hsl(78, 100%, 92%);\n}\n\n#top-ten-dialog > button {\n  position: absolute;\n  border: none;\n  background-color: transparent;\n  font-size: 10px;\n  transform: scale(1.4, 1.1);\n  max-width: 3ch;\n  max-height: 3ch;\n  margin: 0px;\n  box-sizing: content-box;\n  top: 1px;\n  right: 4px;\n  background-color: #ffd314;\n  border-radius: 0;\n  border-bottom-left-radius: 3px;\n  user-select: none;\n  cursor: pointer;\n}\n\n#top-ten-dialog #top-ten-list > .shimmer {\n  border: 0.3rem solid blue;\n  border-image: linear-gradient(0deg, rgb(0, 71, 0), lightgreen);\n  border-image-slice: 1;\n  animation: 2s cubic-bezier(0.1, -0.6, 0.2, 0) infinite alternate shimmer;\n}\n\n#top-ten-dialog #top-ten-list > li {\n  width: 100%;\n  background-color: hsl(78, 100%, calc(92% - sibling-index() * 5%));\n  user-select: none;\n  font-size: small;\n\n  > div:last-child {\n    text-align: end;\n  }\n\n  > div:first-child {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n\n    > input {\n      border-radius: 10px;\n      border-color: white;\n      padding: 3px;\n    }\n\n    > button {\n      border-color: white;\n      aspect-ratio: 1;\n      height: max-content;\n      width: max-content;\n      padding: 1px 4px;\n      border-radius: 50%;\n    }\n\n    > button#edit {\n      background-color: transparent;\n      border: none;\n\n      box-shadow: 1px 1px 1px #524397, 0px -1px 1px #c5d78d;\n      border-radius: 50%;\n    }\n  }\n}\n#top-ten-dialog #top-ten-list {\n  margin-left: 1rem;\n  font-family: cursive;\n  border-radius: 10px;\n\n  > li {\n    padding: 2px 5px;\n    margin: 1px;\n\n    > div:nth-of-type(2) {\n      font-size: smaller;\n    }\n  }\n}\n\nul#menu {\n  visibility: hidden;\n  display: flex;\n  width: max-content;\n  flex-direction: column;\n  list-style-type: none;\n  position: absolute;\n  z-index: 2;\n  color: black;\n  background-color: white;\n  padding: 0.5ch;\n  justify-content: stretch;\n  align-items: stretch;\n  text-align: center;\n\n  > li {\n    padding: 0.5ch;\n  }\n  > li:hover {\n    background-color: yellow;\n    padding: 0.6ch 0.5ch 0.5ch 0.5ch;\n  }\n}\n\n#feedback {\n  visibility: hidden;\n  position: absolute;\n  z-index: 2;\n  color: black;\n  background-color: white;\n  padding: 0.5ch;\n  text-align: center;\n  user-select: none;\n  background-color: red;\n  color: white;\n}\n\n@media only screen and (max-width: 600px) {\n  ul:not(#top-ten-list) {\n    display: flex;\n    flex-direction: column;\n\n    img {\n      max-width: 100px;\n      max-height: 30dvw;\n      min-width: 100px;\n    }\n  }\n}\n',"",{version:3,sources:["webpack://./src/styles.css"],names:[],mappings:"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",sourcesContent:['*:not(dialog) {\n  padding: 0;\n  margin: 0;\n  box-sizing: border-box;\n}\nmain {\n  display: flex;\n  flex-direction: column;\n}\n\n#scene img {\n  max-width: 100%;\n  cursor: pointer;\n}\n\n.anchor {\n  anchor-name: --scene;\n}\n\n#scene #image-enclosure {\n  user-select: none;\n  grid-column: 1 / -1;\n  border: 2px ridge black;\n  padding: 2px;\n  margin: 1rem;\n}\n\nul#characters {\n  margin-left: 1rem;\n  grid-column: 2;\n  display: grid;\n  grid-template-rows: min(20dvh, 150px);\n  grid-template-columns: 30% 30% 30%;\n  width: max-content;\n  list-style-type: none;\n  justify-content: stretch;\n  align-items: stretch;\n  text-align: center;\n\n  > li {\n    display: flex;\n    padding: 0.5ch;\n    max-width: 100%;\n    overflow: clip;\n    aspect-ratio: 1;\n    justify-content: center;\n\n    > label {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      > img {\n        max-width: 140px;\n        max-height: 30dvh;\n        min-width: 140px;\n      }\n    }\n  }\n  > li:hover > label {\n    background-color: rgb(249 239 134);\n    padding: 0.6ch 0.5ch 0.5ch 0.5ch;\n  }\n}\n#targetting-window {\n  visibility: hidden;\n  z-index: 3;\n  position: absolute;\n  position-anchor: --scene;\n\n  anchor-name: --msg-anchor;\n\n  /*\n  width: 33px;\n  height: 33px;\n  border: 5px solid blue;\n  */\n  min-width: 16px;\n  aspect-ratio: 1;\n  border: 0.3rem solid blue;\n  border-image: linear-gradient(0deg, rgb(0, 71, 0), lightgreen);\n  border-image-slice: 1;\n}\n\n#targetting-window.shimmer {\n  animation: 2s cubic-bezier(0.1, -0.6, 0.2, 0) infinite alternate shimmer;\n}\n\n.tag.notfound {\n  display: none;\n}\n\n.tag {\n  background-color: transparent;\n  color: transparent;\n  z-index: 3;\n  position: absolute;\n  position-anchor: --scene;\n  border-radius: 25px;\n  padding: 0.5rem;\n  display: flex;\n  max-width: 32px;\n  height: auto;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n  user-select: none;\n}\n\n.tag:hover {\n  transition: all 0.5s;\n  background-color: #ffffffc2;\n  color: black;\n  width: max-content;\n  max-width: max-content;\n}\n\n@keyframes shimmer {\n  0% {\n    border-image: linear-gradient(0deg, rgb(0, 71, 0), lightgreen);\n    border-image-slice: 1;\n  }\n\n  25% {\n    border-image: linear-gradient(90deg, rgb(0, 71, 0), lightgreen);\n    border-image-slice: 1;\n  }\n  50% {\n    border-image: linear-gradient(180deg, rgb(0, 71, 0), lightgreen);\n    border-image-slice: 1;\n  }\n\n  75% {\n    border-image: linear-gradient(270deg, rgb(0, 71, 0), lightgreen);\n    border-image-slice: 1;\n  }\n}\n\n::backdrop {\n  margin: initial;\n  padding: initial;\n  background-image: linear-gradient(\n    45deg,\n    magenta,\n    rebeccapurple,\n    dodgerblue,\n    green\n  );\n  opacity: 0.75;\n}\n\n.game:not([hidden]) {\n  display: grid;\n\n  grid-template-columns: 100px 1fr;\n  grid-template-rows: repeat(4, auto);\n\n  max-width: min(100vw, 1000px);\n  row-gap: 1rem;\n  column-gap: 1rem;\n\n  justify-content: stretch;\n  align-items: stretch;\n\n  > section:nth-of-type(-n + 3) {\n    display: grid;\n    grid-template-columns: subgrid;\n    grid-template-rows: auto;\n    margin-left: 1rem;\n  }\n\n  > section {\n    grid-column: 1 / -1;\n  }\n\n  > section:has(> button:disabled) {\n    display: none;\n  }\n\n  > #scene {\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    justify-content: center;\n    margin-left: 0.8rem;\n\n    > label {\n      display: flex;\n      flex-direction: row;\n      justify-content: center;\n      align-items: center;\n\n      > button {\n        user-select: none;\n        width: 50px;\n        display: grid;\n        grid-template-rows: 15px;\n        border-radius: 30px;\n        background: radial-gradient(#918174 0%, black 100%);\n        background-position: 50px 0px;\n        border: 3px inset black;\n      }\n\n      > button:hover {\n        background-position: 0px 50px;\n      }\n      > button::after {\n        content: "";\n        background-color: #fff493;\n        border-radius: 50%;\n        width: 49%;\n        margin: 1px;\n        aspect-ratio: 1;\n        user-select: none;\n      }\n\n      > button.offPos::after {\n        content: "";\n        background-color: #fff493;\n        border-radius: 50%;\n        width: 49%;\n        margin: 1px;\n        aspect-ratio: 1;\n        animation: 0.05s linear 1 forwards toggle-motion-right;\n      }\n\n      > button.onPos::after {\n        content: "";\n        background-color: fff493;\n        border-radius: 50%;\n        width: 49%;\n        margin: 1px;\n        aspect-ratio: 1;\n        animation: 0.05s linear 1 forwards toggle-motion-left;\n      }\n    }\n  }\n\n  > section:first-child > p:first-child {\n    height: 100%;\n    width: 100%;\n    text-wrap-style: balance;\n    text-wrap-mode: wrap;\n    text-align: center;\n    padding: 1rem;\n    display: flex;\n    background-color: yellow;\n    font-family: fantasy;\n    letter-spacing: 0.1ch;\n    background: linear-gradient(\n      90deg,\n      #ffeb3b,\n      transparent 95%,\n      transparent 100%\n    );\n  }\n  button {\n    align-self: center;\n    justify-self: center;\n    margin: 5px;\n    height: 100%;\n    width: 100%;\n    min-width: max-content;\n    background-color: yellow;\n    font-weight: 600;\n    border-radius: 5px;\n    user-select: none;\n  }\n}\n\n@keyframes toggle-motion-right {\n  0% {\n    transform: translateX(99%);\n  }\n  100% {\n    transform: translateX(0%);\n  }\n}\n@keyframes toggle-motion-left {\n  0% {\n    transform: translateX(0);\n  }\n  100% {\n    transform: translateX(99%);\n  }\n}\nmain > header {\n  padding: 1rem;\n}\n\n.blur {\n  filter: blur(33px);\n}\n\n#top-ten {\n  border: 5px double black;\n  padding: 1rem;\n  width: 280px;\n}\n\n#top-ten-dialog {\n  border-radius: 20px;\n  width: 280px;\n\n  & h1 {\n    font-size: 1.2rem;\n  }\n}\n#top-ten-dialog > p {\n  padding: 1rem;\n  font-family: fantasy;\n  letter-spacing: 0.1ch;\n  color: #86572e;\n  text-align: center;\n  font-size: x-large;\n  margin-top: 0.5rem;\n  border: 5px double black;\n  padding: .5rem;\n  user-select: none;\n\n  background-color: hsl(78, 100%, 92%);\n}\n\n#top-ten-dialog > button {\n  position: absolute;\n  border: none;\n  background-color: transparent;\n  font-size: 10px;\n  transform: scale(1.4, 1.1);\n  max-width: 3ch;\n  max-height: 3ch;\n  margin: 0px;\n  box-sizing: content-box;\n  top: 1px;\n  right: 4px;\n  background-color: #ffd314;\n  border-radius: 0;\n  border-bottom-left-radius: 3px;\n  user-select: none;\n  cursor: pointer;\n}\n\n#top-ten-dialog #top-ten-list > .shimmer {\n  border: 0.3rem solid blue;\n  border-image: linear-gradient(0deg, rgb(0, 71, 0), lightgreen);\n  border-image-slice: 1;\n  animation: 2s cubic-bezier(0.1, -0.6, 0.2, 0) infinite alternate shimmer;\n}\n\n#top-ten-dialog #top-ten-list > li {\n  width: 100%;\n  background-color: hsl(78, 100%, calc(92% - sibling-index() * 5%));\n  user-select: none;\n  font-size: small;\n\n  > div:last-child {\n    text-align: end;\n  }\n\n  > div:first-child {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n\n    > input {\n      border-radius: 10px;\n      border-color: white;\n      padding: 3px;\n    }\n\n    > button {\n      border-color: white;\n      aspect-ratio: 1;\n      height: max-content;\n      width: max-content;\n      padding: 1px 4px;\n      border-radius: 50%;\n    }\n\n    > button#edit {\n      background-color: transparent;\n      border: none;\n\n      box-shadow: 1px 1px 1px #524397, 0px -1px 1px #c5d78d;\n      border-radius: 50%;\n    }\n  }\n}\n#top-ten-dialog #top-ten-list {\n  margin-left: 1rem;\n  font-family: cursive;\n  border-radius: 10px;\n\n  > li {\n    padding: 2px 5px;\n    margin: 1px;\n\n    > div:nth-of-type(2) {\n      font-size: smaller;\n    }\n  }\n}\n\nul#menu {\n  visibility: hidden;\n  display: flex;\n  width: max-content;\n  flex-direction: column;\n  list-style-type: none;\n  position: absolute;\n  z-index: 2;\n  color: black;\n  background-color: white;\n  padding: 0.5ch;\n  justify-content: stretch;\n  align-items: stretch;\n  text-align: center;\n\n  > li {\n    padding: 0.5ch;\n  }\n  > li:hover {\n    background-color: yellow;\n    padding: 0.6ch 0.5ch 0.5ch 0.5ch;\n  }\n}\n\n#feedback {\n  visibility: hidden;\n  position: absolute;\n  z-index: 2;\n  color: black;\n  background-color: white;\n  padding: 0.5ch;\n  text-align: center;\n  user-select: none;\n  background-color: red;\n  color: white;\n}\n\n@media only screen and (max-width: 600px) {\n  ul:not(#top-ten-list) {\n    display: flex;\n    flex-direction: column;\n\n    img {\n      max-width: 100px;\n      max-height: 30dvw;\n      min-width: 100px;\n    }\n  }\n}\n'],sourceRoot:""}]);const A=a},540:n=>{n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},659:n=>{var e={};n.exports=function(n,t){var o=function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}e[n]=t}return e[n]}(n);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}},825:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=n.insertStyleElement(n);return{update:function(t){!function(n,e,t){var o="";t.supports&&(o+="@supports (".concat(t.supports,") {")),t.media&&(o+="@media ".concat(t.media," {"));var i=void 0!==t.layer;i&&(o+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),o+=t.css,i&&(o+="}"),t.media&&(o+="}"),t.supports&&(o+="}");var r=t.sourceMap;r&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(o,n,e.options)}(e,n,t)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}}},e={};function t(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={id:o,exports:{}};return n[o](r,r.exports,t),r.exports}t.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},t.d=(n,e)=>{for(var o in e)t.o(e,o)&&!t.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:e[o]})},t.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),t.nc=void 0;var o=t(72),i=t.n(o),r=t(825),a=t.n(r),A=t(659),s=t.n(A),l=t(56),c=t.n(l),d=t(540),g=t.n(d),p=t(113),m=t.n(p),u=t(365),h={};let B;h.styleTagTransform=m(),h.setAttributes=c(),h.insert=s().bind(null,"head"),h.domAPI=a(),h.insertStyleElement=g(),i()(u.A,h),u.A&&u.A.locals&&u.A.locals;const f=n=>{for(const e of n)if(e.contentBoxSize){console.log("size? ",e.contentBoxSize[0]);const n=document.querySelector("#targetting-window"),t=Math.floor(1.9*e.contentBoxSize[0].inlineSize/100);n.style.width=E(t)}};function C(n){n.innerHTML="<h1>Sorry, something went wrong. We weren't able to setup a game for you to play. Please try again later."}async function b(n){const e=new Headers;e.append("Content-Type","application/json");const t=await fetch(`${n}/game`,{method:"GET",headers:e,credentials:"include"});if((t.ok||304===t.status)&&t.body)return await t.json();throw new Error("Failed to get game data")}function E(n){return`${n}px`}function x(n){return Number(n.slice(0,n.length-2))}function y(n,e,t,o){const i=n.createElement("div");i.style.top=`anchor(${t}%)`,i.style.left=`anchor(${e}%)`,i.innerText=o,i.classList.add("tag"),i.setAttribute("anchor-name",`--${o}`),n.querySelector("#scene").appendChild(i)}function w(n,e=!0){const t=n.querySelector("#feedback"),o=n.querySelector("#menu");t.style.positionAnchor="--msg-anchor",t.style.position="fixed",t.style.opacity=".85",t.style.positionArea="",t.style.visibility="visible",t.style.width="max-content",t.style.backgroundColor=e?"red":"green",t.style.color="white",t.innerText=e?"Wrong Answer!":"Correct!","true"===o.getAttribute("data-top")?(console.log("found data-top: ",x(o.style.top)),t.style.positionArea+="top"):t.style.positionArea+="bottom","true"===o.getAttribute("data-left")?(console.log("found data-left: ",x(o.style.left)),t.style.positionArea+=" left"):t.style.positionArea+=" right"}function k(n){const e=n.querySelector("#top-ten-message");n.querySelector("#objective").innerText="Well done! You found these characters: ",e.innerText="You've found them all! Click the Top Ten button to see your score!"}!async function(n){const e=n.querySelector("#top-ten-dialog"),t=n.querySelector("#start"),o=n.querySelector("#show-top-ten"),i=n.querySelector("dialog button"),r=n.querySelector("#resolution"),a=n.querySelectorAll(".game"),A=n.querySelector("#message"),s=n.querySelector("#top-ten-message");try{await(async l=>{const c=new Headers;c.append("Content-Type","application/json");try{const d=await fetch(`${l}/resumeGame`,{method:"GET",headers:c,credentials:"include"});let g=!1,p=!1;if((d.ok||304===d.status)&&(g="true"===(await d.json()).message),A.innerText="",g){console.log("user resumes the game"),s.innerText="Game is ongoing.";const e=await fetch(`${l}/game`,{method:"GET",headers:c,credentials:"include"});if(!e.ok&&304!==e.status)throw console.log(`Failed call to GET ${l}/game/answers`),new TypeError("Oops, we can't resume your game right now!");{t.setAttribute("disabled",!0),n.querySelector("#scene").classList.remove("blur");const o=await e.json();if(console.log("the answers I need to tag: ",o.game),o.game.gameAnswers&&o.game.gameAnswers.length>0){const e=n.querySelector("#scene");n.querySelectorAll(".tag").forEach(n=>e.removeChild(n)),o.game.gameAnswers.forEach(e=>y(n,e.location_x,e.location_y,e.character_name.name))}o.game.end_time&&(k(n),p=!0,n.querySelectorAll(".tag").forEach(n=>{n.style.backgroundColor="#ffffffc2",n.style.color="black",n.style.width="min-content",n.style.maxWidth="min-content"}))}}else n.querySelector(".game > section:last-of-type").classList.add("blur");const m=await fetch(`${l}/scene`,{method:"GET",headers:c,credentials:"include"});console.log("response type: ",m.type);const u=m.headers.get("content-type");if(!u||!u.includes("application/json"))throw new TypeError("Oops, we haven't got JSON!");if((m.ok||304===m.status)&&m.body){const d=await m.json();console.log(d);const g=d.id,u=await fetch(`${l}/scene/${g}/characters`,{method:"GET",headers:c,credentials:"include"});if(!u.ok&&304!==u.status||!u.body)throw console.log(`Failed call to GET ${l}/game/answers`),new TypeError("Oops, we can't setup the game right now!");{const c=await u.json(),m=function(n,e){const t=n.querySelector("#scene"),o=n.querySelector("#image-enclosure");console.log("ss: ",t);const i=new Image;return i.src=e.url,i.alt="scene",i.classList.add("anchor"),o.appendChild(i),i}(n,d);let h=function(n,e){const t=n.querySelector("#characters");let o="";return e.characters.forEach((e,i,r)=>{console.log(e);const a=n.createElement("li"),A=n.createElement("label");A.innerText=e.name;const s=new Image;s.src=e.url,s.alt=e.name,o+=i>=0&&i<r.length-1?`${e.name}, `:`and ${e.name}`,A.appendChild(s),a.appendChild(A),t.appendChild(a)}),o}(n,c);const f=`Let's find ${h}!`,v="This game will be timed! Will your time earn you a place in the top ten?";p||(A.innerText=f,s.innerText=v,B=e=>async function(n,e,t,{sceneId:o,imgRef:i}){e.querySelector("#feedback").style.visibility="hidden";const r=await b(t);console.log(r);const a=r.game.scene.characters;if(0===a.length)return;const A=Math.min(x(getComputedStyle(i).width),x(getComputedStyle(i).height)),s=e.querySelector("#menu"),l=s.parentElement,c=e.createElement("ul");c.style.positionAnchor="--msg-anchor",c.setAttribute("id","menu"),l.replaceChild(c,s);const d=document.querySelector("#targetting-window"),g=Math.floor(1.9*A/100);console.log({widthOfImage:A,targetWindowSize:g}),d.style.width=E(g),c.innerHTML="",a.forEach(n=>{const t=e.createElement("li");t.innerText=n,c.appendChild(t)});const p=c.offsetHeight,m=c.offsetWidth,u=g>>1;console.log({targetWindowApothem:u});const h=i.getBoundingClientRect();console.log("image rect top left corner in the page: ",h.x,h.y);const f=Math.floor(Number(n.clientY)-Math.abs(h.top)),v=Math.floor(Number(n.clientX)-Math.abs(h.left)),I=window.innerWidth||e.documentElement.clientWidth,q=window.innerHeight||e.documentElement.clientHeight;console.log("(clientX,clientY, relX, relY): ",n.clientX,n.clientY,v,f),console.log("(viewWidth,viewHeight)",e.documentElement.clientWidth,e.documentElement.clientHeight);let T=v,M=f;n.clientX+m>I-10?(T-=m+15,console.log(`instead of X ${n.clientX} move to ${T}`),c.setAttribute("data-left",!0)):T+=15,n.clientY+p>q-10&&(console.log("show above"),M-=p,c.setAttribute("data-top",!0));const S=Math.abs(h.x)+window.scrollX,j=Math.abs(h.y)+window.scrollY;console.log("xOffset: ",S),console.log("yOffset: ",j),"true"===c.getAttribute("data-top")?c.style.positionArea+="top":c.style.positionArea+="bottom","true"===c.getAttribute("data-left")?c.style.positionArea+=" span-left":c.style.positionArea+=" span-right",c.style.visibility="visible",c.classList.add("shimmer");const z=(100*(n.clientX-u-h.x)/i.width).toFixed(3),W=(100*(n.clientY-u-h.y)/i.height).toFixed(3);console.log("normalizedX, normalizedY: ",z,W,i.width,i.height),d.style.left=`anchor(${z}%)`,d.style.top=`anchor(${W}%)`,d.style.visibility="visible",d.classList.add("shimmer"),d.style.borderWidth=E(Math.min((.005*A).toFixed(2),3)),c.addEventListener("click",n=>{c.style.visibility="hidden",async function(n,e,t,o,i,{sceneId:r,imgRef:a,imgRect:A}){console.log("in characterChoiceHandler: ",n.innerText,o,i,a.naturalWidth,a.naturalHeight);const s=n.textContent;console.log("selected Character: ",n,s);const l=new Headers;l.append("Content-Type","application/json");try{!function(n){const e=n.querySelector("#feedback"),t=n.querySelector("#menu");e.style.positionAnchor="--msg-anchor",e.style.position="fixed",e.style.opacity=".85",e.style.positionArea="",e.style.visibility="visible",e.style.width="max-content",e.style.backgroundColor="white",e.style.color="black",e.innerText="Checking...","true"===t.getAttribute("data-top")?(console.log("found data-top: ",x(t.style.top)),e.style.positionArea+="top"):e.style.positionArea+="bottom","true"===t.getAttribute("data-left")?(console.log("found data-left: ",x(t.style.left)),e.style.positionArea+=" left"):e.style.positionArea+=" right"}(e);const n=await fetch(`${t}/game/answer?x=${o}&y=${i}&character=${s}`,{method:"PUT",headers:l,credentials:"include"});if(201===n.status&&n.body){console.log("if it is the correct answer");const t=await n.json();if(console.log(t),y(e,o,i,s),t.end_time?k(e):w(e,!1),t.end_time){a.removeEventListener("mousedown",B),e.querySelectorAll(".tag").forEach(n=>{n.style.backgroundColor="#ffffffc2",n.style.color="black",n.style.width="min-content"});const n=e.querySelector("#show-top-ten");n.focus(),n.dispatchEvent(new Event("click"))}}else{if(200!==n.status)throw console.error("top ten list response was not what we expected for this part of the game"),new Error("Couldn't fetch the top ten list.");{const t=await n.json();console.log(t),"Wrong answer"===t.message&&w(e,!0)}}}catch(n){console.error(n),C(e.querySelector("#message"))}}(n.target,e,t,z,W,{sceneId:o,imgRef:i,imgRect:h})},{once:!0},!0)}(e,n,l,{sceneId:g,imgRef:m}),m.addEventListener("mousedown",B)),o.addEventListener("click",t=>async function(n,e,t,o,i){console.log("in showTopTen after receiving a click event");let r=!1;i.showModal();const a=e.querySelector("#top-ten"),A=e.querySelector("#score"),s=new Headers;s.append("Content-Type","application/json");const l=await fetch(`${t}/scene/${o}/topten`,{method:"GET",headers:s,credentials:"include"});if((l.ok||304===l.status)&&l.body){const n=await l.json(),o=e.querySelector("#top-ten-dialog>p");if(console.log(n),0===n.topTen.length)o.innerText="No top scores recorded yet! Be the first!",a.style.display="none";else{a.style.display="block",a.addEventListener("click",async n=>{n.preventDefault();const o=e.querySelector("#username"),i=n.target.parentElement,r=i.parentElement;if("save"===n.target.id){const A=new FormData(a),s=new URLSearchParams;for(const[n,e]of A.entries())s.append(n,e);const l=await fetch(`${t}/game`,{method:"PUT",body:s,headers:{"Content-Type":"application/x-www-form-urlencoded"},credentials:"include"});if((l.ok||304===l.status)&&l.body){const t=await l.json();console.log(t),n.target.parentElement===i&&(i.removeChild(n.target),i.removeChild(o)),r.classList.remove("shimmer"),i.innerText=t.game.username;const a=e.createElement("button");a.innerText="✏️",a.setAttribute("type","button"),a.setAttribute("id","edit"),i.appendChild(a)}}else if("edit"===n.target.id){i.removeChild(n.target);const t=i.innerText;i.innerText="",r.classList.add("shimmer");const o=e.createElement("input");o.setAttribute("type","text"),o.setAttribute("id","username"),o.setAttribute("minlength",1),o.setAttribute("maxlength",25),o.value=t,o.setAttribute("name","username");const a=e.createElement("button");a.setAttribute("id","save"),a.setAttribute("type","submit"),a.innerText="✔",i.appendChild(o),i.appendChild(a)}}),o.innerText="Top 10",n.id;const i=e.createElement("ol");i.setAttribute("id","top-ten-list"),i.classList.add("toptenlist"),n.topTen.forEach(t=>{const o=e.createElement("li"),a=e.createElement("div");if(t.id===n.id){r=!0,o.classList.add("shimmer");const n=e.createElement("input");n.setAttribute("type","text"),n.setAttribute("id","username"),n.setAttribute("minlength",1),n.setAttribute("maxlength",25),"anonymous"===t.username?n.setAttribute("placeholder","Enter your name"):n.value=t.username,n.setAttribute("name","username");const i=e.createElement("button");i.setAttribute("id","save"),i.setAttribute("type","submit"),i.innerText="✔",a.appendChild(n),a.appendChild(i)}else a.innerText=t.username;const A=e.createElement("div"),s=t.elapsed_time.length;A.innerText=t.elapsed_time.slice(0,s-4),o.appendChild(a),o.appendChild(A),i.appendChild(o),console.log(t)}),console.log("the top ten list: ",i),a.innerHTML="",a.appendChild(i);const s=e.createElement("h1");A.innerHTML="";const l=n?.elapsed_time?.length;r&&l?s.innerText=`Amazing, you're in the Top Ten! You found all the characters in ${n.elapsed_time.slice(0,l-4)}`:n.elapsed_time&&(s.innerText=`Well done! You found all the characters in ${n.elapsed_time.slice(0,l-4)}`),A.appendChild(s)}}}(0,n,l,g,e)),i.addEventListener("click",()=>{e.close()}),r.addEventListener("click",()=>function(n,e){"none"!==getComputedStyle(e)["max-width"]?(e.style.maxWidth="none",n.classList.remove("offPos"),n.classList.add("onPos")):(e.style.maxWidth="100%",n.classList.add("offPos"),n.classList.remove("onPos"))}(r,m)),t.addEventListener("click",async()=>{const e=await b(l);console.log("game has started: ",e),console.log(n.cookie),t.setAttribute("disabled",!0),n.querySelector(".game > section:last-of-type").classList.remove("blur")}),a.forEach(n=>{n.toggleAttribute("hidden")})}}else console.log(m),C(A)}catch(n){console.log("caught an internal error"),C(A),console.error(n.message)}})("https://where-is-waldo-api-vczk.onrender.com");const l=n.querySelector("#image-enclosure > img");console.log("done setting up"),console.log("width, height of image: ",l.width,l.height),console.log("image node: ",l),l&&new ResizeObserver(f).observe(l)}catch(e){console.error(e),C(n.querySelector("#message"))}}(document)})();
//# sourceMappingURL=main.js.map